# Encrypter
One of generic spiral components provides functionality to encrypt and decrypt your application data. Spiral uses encyption key and cipher are defined in `app/config/encrypter.php` configuration file (key value usually comes from `.env` file). You can always set new encrypt key value by using CLI command `app:key`.

> Key will be set automatically during application installation.

## EncrypterInterface
To better understand what type of functionalites available for us let's take a look at `EncrypterInterface`:

```php
interface EncrypterInterface
{
    /**
     * Create and encrypter instance with new key.
     *
     * @param string $key
     * @return self
     * @throws EncrypterException
     */
    public function withKey($key);

    /**
     * Encryption ket value. Sensitive data!
     *
     * @return string
     */
    public function getKey();

    /**
     * Generate random set of bytes with specified length.
     *
     * @param int $length
     * @return string
     * @throws EncrypterException
     */
    public function random($length);

    /**
     * Encrypt data into encrypter specific payload string. Can be decrypted only using decrypt()
     * method.
     *
     * @see decrypt()
     * @param mixed $data
     * @return string
     * @throws EncryptException
     * @throws EncrypterException
     */
    public function encrypt($data);

    /**
     * Decrypt payload string. Payload should be generated by same encrypter using encrypt() method.
     *
     * @see encrypt()
     * @param string $payload
     * @return mixed
     * @throws DecryptException
     * @throws EncrypterException
     */
    public function decrypt($payload);
}
```

You can see we can encrypt, decrypt, generate random set of bytes and change encryption keys our of the box. By default spiral will bind `EncrypterInterface` to `Spiral\Encrypter\Encrypter` class which utilized [defuse/php-encryption](https://github.com/defuse/php-encryption) package for such operation.

If you wish to get access to encrypter in your code - use IoC container, depencency injections or short binding "encrypter" (as usual we are giving example using Controller action).

```php
protected function indexAction(EncrypterInterface $encrypter)
{
    //Never expose encryption key to website users
    dump($encrypter->getKey());

    dump($payload = $encrypter->encrypt(['abc']));
    dump($encrypter->decrypt($payload));

    //Attention, base 64 length of this string will not be equal to 100 characters (136)
    dump(base64_encode($this->encrypter->random(100)));
}
```

You can change your runtime encryption cipher at any moment, only make sure that encryption key has valid length and security.

## Standalone
If you wish to use encrypter separatelly, or construct manually simply provide key and cipher values into Encrypter constructor:

```php
$encypter = new Encrypter('my-key');
```
